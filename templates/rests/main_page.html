{% extends 'base.html' %}
{% block content %}
<br>
    <form method="post" action="{% url 'main_page' %}">
        {% csrf_token %}

        <label for="start_date">Дата заїзду</label>
        <input type="date" name="start_date" value="{{ start_date }}" min="{% now 'Y-m-d' %}" required>

        <label for="end_date">Дата виїзду</label>
        <input type="date" name="end_date" value="{{ end_date }}" min="{% now 'Y-m-d' %}" required>


        <label for="capacity">Кількість осіб: </label>
        <input type="number" name="capacity" value="{{ capacity }}" min="1" max="4">

        <label for="tep">Тип: </label>
        <select name="tep" id="tep">
            <option value="active" {% if tep == "active" %}selected{% endif %}>Активний</option>
            <option value="passive" {% if tep == "passive" %}selected{% endif %}>Пасивний</option>
            <option value="mixed" {% if tep == "mixed" %}selected{% endif %}>Змішаний</option>
        </select>
        
        <label for="min_price">Ціна від: </label>
        <input type="number" name="min_price" value="{{ min_price }}" placeholder="від" min="1">
        
        <label for="max_price">Ціна до: </label>
        <input type="number" name="max_price" value="{{ max_price }}" placeholder="до" min="1">

        <button type="submit">Фільтрувати</button>
    </form>

    <h1>Наші кімнати</h1>
    {% for room in rests %} {# тут rests насправді має бути queryset Room #}
        <img src="{{ room.rest.photo.url }}">
        <h3>Кімната №{{ room.number }} ({{ room.capacity }} місць)</h3>
        <p>Тип: {{ room.rest.tep }}</p>
        <p>Категорія: {{ room.rest.category }}</p>
        <p>Ціна: {{ room.rest.price }}</p>
        <p><a href="{% url 'booking' %}?room_id={{ room.id }}&start_date={{ start_date }}&end_date={{ end_date }}">Забронювати</a></p>
        <hr>
    {% endfor %}
{% endblock %}